---
title: 'React Native 에서 NFC 사용하기'
date: 2021-08-03
categories: React-Native FrontEnd
---

# React Native 에서 NFC 사용하기

      react-native-nfc-manager

RN 에서 NFC 사용 가능

iOS 는 iOS 11 이상부터 지원

NFC 를 읽거나 쓰기 가능

1. react-native-nfc-manager 세팅

   ```
         yarn add react-native-nfc-manager

         cd ./ios && pod install
   ```

   ```
         import NFCManager, { NfcEvents } from 'react-native-nfc-manager';
   ```

2. 초기화

```

const initNFC = async () => {
      // NFC 지원하는지 확인
    const isNFCSupport = await getIsNFCSupport();
    alert(isNFCSupport);
    if (!isNFCSupport) {
      alert('NFC 를 지원하지 않는 기기 입니다');
      return;
    }
      // NFC 활성화 확인
    const isNFCEnabled = await getIsNFCEnabled();
    alert(isNFCEnabled);
    if (!isNFCEnabled) {
      alert('NFC 가 활성화되어 있지 않습니다');
      return;
    }
    readNFC();
  };

  // start 로 init
  // isSupported 로 NFC 확인 유무 확인
  const getIsNFCSupport = async () => {
    try {
      await NFCManager.start();
      await NFCManager.isSupported();
      return true;
    } catch (e) {
      return false;
    }
  };

  // iOS 이고 version 이 11 이상이면 통과
  const getIsNFCEnabled = async () => {
    const isIOS = Platform.OS === 'ios';
    const iOSVersion = parseInt(Platform.Version, 10) >= 11;
    if (isIOS && iOSVersion) {
      return true;
    }
    // NFC 가 활성화 상태인지 확인
    try {
      const isNFCEnabled = await NFCManager.isEnabled();
      return isNFCEnabled;
    } catch (e) {
      return false;
    }
  };

```

3. 읽어오기

```
// NFC 읽어오는 함수
const readNFC = async () => {
      // NFC 읽어왔을 시 이벤트 처리
    await NFCManager.setEventListener(NfcEvents.DiscoverTag, onSuccessTagEvent);
      // NFC 종료됐을 시 clean 함수
    await NFCManager.setEventListener(NFCManager.SessionClosed, cleanUpNFC);
    // NFC 실행 함수
    await NFCManager.registerTagEvent();
  };
      // NFC 성공했을 시 callback
  const onSuccessTagEvent = async (tag) => {
    alert(`${tag} RN`);

    const message = {
      type: 'NFCRead',
      data: {
        UID: tag.UID,
      },
    };
    webViewRef.postMessage(JSON.stringify(message));
  };
      // cleanup 함수
  const cleanUpNFC = () => {
    NFCManager.setEventListener(NfcEvents.DiscoverTag, null);
    NFCManager.setEventListener(NfcEvents.SessionClosed, null);
  };
```
